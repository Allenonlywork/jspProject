# jspProject
目录
1  需求分析	2
1  设计方案	2
3  数据库设计	2
3.1  概念设计	3
3.2  E-R图	3
3.3  逻辑结构设计	4
3.3.1  用户表user	5
3.3.2商品分类表 classify	5
3.3.3化妆品信息表 cosmeticForm	5
3.3.4订单信息表 orderForm	6

4  主要功能模块实现	6
4.1  用户功能模块实现	错误!未定义书签。
4.1.1  用户注册	6
4.1.2 用户登录	错误!未定义书签。
4.2  商品管理模块	错误!未定义书签。
4.2.1  商品分类	错误!未定义书签。
4.2.2  商品查询	9
4.2.3  商品信息展示	10
4.2.4  提交购物车	11
4.2.5  提交订单	12
4.5购物车模块实现	错误!未定义书签。
4.5.1  购物车列表	错误!未定义书签。
5  软件测试	12
5.1  数据库测试	12
5.2  功能测试	12
5.3  测试过程中遇到的问题及解决方法	12
5.4  系统尚存在的不足	13
6 结论与心得体会	13

1  需求分析
该化妆品销售网站主要包括用户信息管理，商品管理，购物车管理等。
商品管理具体内容：商品分类，库存管理，购物车与订单信息管理，商品列表中可以对商品进行删除与更新，并且可对指定商品进行查询显示；可以根据商品版本，名称，价格等信息，进行商品的查询。
用户信息管理包括用户注册信息保存，实现对用户登录信息的验证，以及对用户购物车，订单信息处理。
用户通过浏览化妆品信息可以选择需要添加到购物车的商品，可以在购物车页面进行提交订单操作。
2  设计方案
本系统拟采用JSP和servlet作为后台开发工具，html,css开发前台，MySQL作为数据存储的工具。
通过对普通电商网站的了解，抽象出具体的需求分析，把整个化妆品销售网站分为以下五个模块：注册，登录，化妆品查询，购物车管理，订单管理。
网站主页面实现简单，通过嵌入用 XML 语言编写的文本文件实现整体的框架，文本文件主要实现头部导航的功能，用来提示用户进行基本的操作。
用户登录界面提供用户反馈信息用于提示用户是否登录成功；用户若没有没有账号则课通过注册页进行注册，注册页通过servlet 控制器实现了对注册信息的验证；若用户为注册或登录也可进行一些基本的操作，如查询化妆品信息，但无法查看购物车，通过查询验证 session 中用户信息来确定用户是否有权限访问购物车；若 session 为空则给用户返回一个登录页。提示用户进行登录后才可以访问。
用户通过浏览商品信息可以选择自己感兴趣的商品，进行添加到购物车，之后可以在购物车中，选择需要购买的商品进行下订单操作，可在订单详情页查看自己的订单状态。
通过分析该网站的具体功能和详细的设计，决定采用mvc模式实现我们的网站。即数据存储(mysql)，界面显示(jsp)和逻辑处理(servlet)分隔开来实现，把网站实现划分模块，不同模块之间提供相应的接口，不仅便于实现，而且便于日后管理和维护。


3  数据库设计
在任何有关于电子商务的系统开发中，数据库设计是整个开发过程中必不可少的过程也是技术的核心。良好的数据库设计模式，可以为系统开发者提供友好的开发环境，用以开发满足用户需求的系统。只有合理的设计后台数据库，才能够提供数据的存储和操作效率，简单快捷的开发过程，可以提高系统的安全性和性能。一个好的数据库结构可以提高服务器处理速度，减小系统占用资源的空间，使得操作更简洁。用统一的一个数据库代替人工来管理大量的数据已经成为大型系统开发的主要趋势，并且已经开发出许多数据库，如MySQL、Oracle、Nosql等，由于Mysql数据库具有处理数据快、并发访问，占用资源较小，所以本系统开发使用的数据库是Mysql。
3.1  概念设计
数据库的概念设计的主要数据名称如表4.1所示。 
表3.1 主要的数据名称表
表名	说明
user
classify	用户表
化妆品分类表
cosmeticForm	化妆品信息表
orderForm	订单信息表
3.2  E-R图
E-R图是一种描述数据的概念模型，目的是为了给系统设计人员提供方便，同时也是设计人员与用户之间的主要沟通方式。这一概念模型具有的特点是：较强的语言表达能力，方便直接，易于用户理解。
 
图3.2 总体 E-R 图
	 
图3.2 用户与订单信息 E-R 图
3.3  逻辑结构设计
设计一个缜密的数据库逻辑结构，重要的步骤就是数据库的设计，而数据库的主要逻辑结构设计主要是将E-R图完全转化为数据库支持的数据模型，使得逻辑结构也和数据库相符。

数据库表结构
3.3.1用户表user
 
图3.3.1 user表
3.3.2商品分类表 classify：
 
图3.3.2 classify表
3.3.3化妆品信息表 cosmeticForm：
 
图3.3.3 cosmeticForm 表
 
图3.3.4 cosmeticForm 表
 
图3.3.5 cosmeticForm 表

3.3.4订单信息表 orderForm：
 
图3.3.6 orderForm表
4  主要功能模块实现
4.1.1  用户注册
	用户通过访问注册页链接进入注册页面，用户注册信息提交到servlet 由控制器对用户信息进行验证，只要出现有一项不符合验证规则的数据，表单则提交失效；采用转发的方式返回反馈信息。

用户注册页如下图所示：
 

 
 

页面结构如下
首页：
 
登录页：
 
浏览化妆品：
可通过浏览化妆品页面对化妆品进行分类查找，在byPageShow.jsp 页面进行显示化妆品信息
可以通过点击查看细节，查看单个商品的基本信息（包括图片描述）
添加到购物车之后可以在购物车中查询之前添加的商品
在购物车页面可以进行提交订单操作
提交订单之后可以在 lookOrderForm.jsp 页面查看已经提交的订单
 
 
也可以在searchCosmetic.jsp 页面进行查询化妆品信息，可通过化妆品版本号、名称、价格区间进行查询（按照指定的格式进行输入，如果输入格式有误则无法进行查询，提示用户进行正确的操作）
 
 
 

购物车页面可以对添加进购物车的商品进行管理，可以生成订单，或进行删除操作
 


提交之后的订单在 lookOrderForm.jsp 页面可以进行查看
 
用户可以退出登录，通过删除session 中的信息实现


若用户未登录则无法查看购物车以及订单信息，通过servlet 控制器进行 验证session 信息是否可用，若无则 重定向到 Login.jsp 页面 提示用户先进行登录才能进行查看购物车以及订单信息。
 


 
5  软件测试
为了高效、高质量的完成一个软件项目，测试要求必须完善且适度，否则，如果将系统软件投入到运行中会让使用者承担很大的危险，付出很大的代价。系统开发中的测试只能够向开发者证明错误的存在，但是不是能够表明隐藏的错误是否会造成很大的影响[5]。
5.1  数据库测试 
测试数据库时需要考虑以下多个方面：
1、数据库设计的测试
本系统的数据库共设计了4个表，每个表中的信息都是系统所必须的，没有出现冗余现象，主键和外键设计的也较为合理，大大提高了查询速度。
2、SQL语句效率测试
在软件测试的过程中，需要对SQL操作语句进行执行效率的测试。
5.2  功能测试
在功能测试的部分主要是对系统的实际操作进行测试，主要作用是对各个功能的使用情况的完善性和可操作性进行检查，使用这种方法便于测试人员及时更改和完善代码。
	功能测试主要分为两部分：单元测试和集成测试。
	单元测试方面，主要是登录时用户名或密码错误、条件下对商品进行评论、管理员越权操作、表单数据格式或内容非法的条件下提交等情况进行测试，确保系统的每一个单元模块都能正常运行。
	集成测试方面则需要联系整个系统的各个部分，检查各个模块的耦合度，目的是把各模块发生的冲突率降低，并且通过反复调试和修改，将多部分整合到一起，真正实现一个完整的电子商务系统[6]。
5.3  测试过程中遇到的问题及解决方法
(1) 编码格式的乱码问题
错误描述：页面经常出现乱码
问题分析与解决：在发现系统存在这样的问题初期，一是数据库建表编码使用character set GB2312 ，二是在 eclipse IDE 中进行设置编码修改成 GB2312
(2) 服务器时区错误问题
	通过在url 设置加上 serverTimeZone =UTC 解决时区异常的问题
(3) 订单号重复问题
	在数据库建表时 设置 ID 字段为自增长通过设置该字段为AUTO_INCREMENT
5.4  系统尚存在的不足
首先，网站在用户体验度方面还需要加强，同时，页面需要美化、所需加载的资源需要优化。
其次，在信息安全方面，用户密码未使用加密存储，容易产生泄露数据危险。
最后，实现的功能较为单一，用户体验一般；例如购物车页面给用户提供的操作较少；用户对于订单的操作有待进一步拓展。
